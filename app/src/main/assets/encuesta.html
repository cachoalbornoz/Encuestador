<!DOCTYPE html>
<html>
<head>
	<title>SGEER - Sistema Gestión de Encuestas E.R.</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name=viewport content="width=device-width">

	<style type="text/css">
		.colWidth100{width:100%}
		.colWidth97{width:97%}
		.colWidth90{width:90%}
		.colWidth10{width:10%}
		.colWidth3{width:3%}
	</style>
</head>
<body>

<a id="tablero"></a>

<table class="colWidth100">
	<tr>
		<td class="colWidth10">&nbsp;</td>
		<td  class="colWidth90" style="text-align: right;">
			<input type="hidden"  name="id_encuesta" id="id_encuesta" value="73"/>
			Usuario
			<input type="text" value="1" name="usuario" id="usuario" size="2" style="text-align:center">
			Guardadas
			<input type="text" value="0" name="total_total" id="total_total" size="2" style="text-align:center">
		</td>
	</tr>
	<tr>
		<td colspan="2" class="colWidth100"><hr></td>
	</tr>
</table>


<form name="preguntas" id="preguntas" method="post">
	<table id="tabla_opciones" class="colWidth100">


		<tr>
			<td class="colWidth3"><input type="text" value="1" size="1" readonly style="text-align:center"/></td>
			<td class="colWidth97">SEXO</td>
		</tr>
		<tr>
			<td colspan="2">


				<select id="1" name="1" size="1" tabindex="1">
					<option value="0">...</option>
					<option value="1">MASCULINO</option>
					<option value="2">FEMENINO</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>
				<div id="div_otra_opcion_1" style="display:none">
					<input type="text" id="otra_opcion_1" name="otra_opcion_1" class="input_text" />
				</div>
			</td>
		</tr>
		<tr id="fila_opciones_1">
			<td colspan="2">&nbsp;</td>
		</tr>

		<tr>
			<td class="colWidth3"><input type="text" value="2" size="1" readonly style="text-align:center"/></td>
			<td class="colWidth97">EDAD</td>
		</tr>
		<tr>
			<td colspan="2">


				<select id="2" name="2" size="1" tabindex="2">
					<option value="0">...</option>
					<option value="16">16</option>
					<option value="17">17</option>
					<option value="18">18</option>
					<option value="19">19</option>
					<option value="20">20</option>
					<option value="21">21</option>
					<option value="22">22</option>
					<option value="23">23</option>
					<option value="24">24</option>
					<option value="25">25</option>
					<option value="26">26</option>
					<option value="27">27</option>
					<option value="28">28</option>
					<option value="29">29</option>
					<option value="30">30</option>
					<option value="31">31</option>
					<option value="32">32</option>
					<option value="33">33</option>
					<option value="34">34</option>
					<option value="35">35</option>
					<option value="36">36</option>
					<option value="37">37</option>
					<option value="38">38</option>
					<option value="39">39</option>
					<option value="40">40</option>
					<option value="41">41</option>
					<option value="42">42</option>
					<option value="43">43</option>
					<option value="44">44</option>
					<option value="45">45</option>
					<option value="46">46</option>
					<option value="47">47</option>
					<option value="48">48</option>
					<option value="49">49</option>
					<option value="50">50</option>
					<option value="51">51</option>
					<option value="52">52</option>
					<option value="53">53</option>
					<option value="54">54</option>
					<option value="55">55</option>
					<option value="56">56</option>
					<option value="57">57</option>
					<option value="58">58</option>
					<option value="59">59</option>
					<option value="60">60</option>
					<option value="61">61</option>
					<option value="62">62</option>
					<option value="63">63</option>
					<option value="64">64</option>
					<option value="65">65</option>
					<option value="66">66</option>
					<option value="67">67</option>
					<option value="68">68</option>
					<option value="69">69</option>
					<option value="70">70</option>
					<option value="71">71</option>
					<option value="72">72</option>
					<option value="73">73</option>
					<option value="74">74</option>
					<option value="75">75</option>
					<option value="76">76</option>
					<option value="77">77</option>
					<option value="78">78</option>
					<option value="79">79</option>
					<option value="80">80</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>
				<div id="div_otra_opcion_2" style="display:none">
					<input type="text" id="otra_opcion_2" name="otra_opcion_2" class="input_text" />
				</div>
			</td>
		</tr>
		<tr id="fila_opciones_2">
			<td colspan="2">&nbsp;</td>
		</tr>

		<tr>
			<td class="colWidth3"><input type="text" value="3" size="1" readonly style="text-align:center"/></td>
			<td class="colWidth97">PRESIDENTE</td>
		</tr>
		<tr>
			<td colspan="2">



				<select id="3" name="3" size="1" onchange="3" tabindex="3">
					<option value="0">...</option>
					<option value="59">DANIEL SCIOLI (FPV)</option>
					<option value="60">MAURICIO MACRI (CAMBIEMOS)</option>
					<option value="61">SERGIO MASSA (UNA)</option>
					<option value="62">ERNESTO SANZ (CAMBIEMOS)</option>
					<option value="63">JOSE DE LA SOTA (UNA)</option>
					<option value="64">ELISA CARRIO (CAMBIEMOS)</option>
					<option value="65">MARGARITA STOLBIZER (PROGRESISTAS)</option>
					<option value="66">JORGE ALTAMIRA (FIT)</option>
					<option value="67">NICOLAS DEL CAÑO (FIT)</option>
					<option value="68">ADOLFO RODRIGUEZ SAA (COMPROMISO FEDERAL)</option>
					<option value="69">VICTOR DE GENNARO (FRENTE POPULAR)</option>
					<option value="70">ALEJANDRO BODART (NUEVA IZQUIERDA)</option>
					<option value="71">MANUELA CASTAÑEIRA (MAS)</option>
					<option value="72">OTRO</option>
					<option value="73">EN BLANCO</option>
				</select>

			</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>
				<div id="div_otra_opcion_3" style="display:none">
					<input type="text" id="otra_opcion_3" name="otra_opcion_3" class="input_text" />
				</div>
			</td>
		</tr>
		<tr id="fila_opciones_3">
			<td colspan="2">&nbsp;</td>
		</tr>

		<tr>
			<td class="colWidth3"><input type="text" value="4" size="1" readonly style="text-align:center"/></td>
			<td class="colWidth97">GOBERNADOR</td>
		</tr>
		<tr>
			<td colspan="2">



				<select id="4" name="4" size="1" onchange="4" tabindex="4">
					<option value="0">...</option>
					<option value="74">GUSTAVO BORDET (FPV)</option>
					<option value="75">ALFREDO DE ANGELI (CAMBIEMOS)</option>
					<option value="76">A. FUERTES-J. BUSTI (UNA)</option>
					<option value="77">LISANDRO VIALE (PROGRESISTAS)</option>
					<option value="78">GABRIEL GEIST (NUEVA IZQUIERDA)</option>
					<option value="79">EN BLANCO</option>
				</select>

			</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>
				<div id="div_otra_opcion_4" style="display:none">
					<input type="text" id="otra_opcion_4" name="otra_opcion_4" class="input_text" />
				</div>
			</td>
		</tr>
		<tr id="fila_opciones_4">
			<td colspan="2">&nbsp;</td>
		</tr>

		<tr>
			<td class="colWidth3"><input type="text" value="5" size="1" readonly style="text-align:center"/></td>
			<td class="colWidth97">INTENDENTE</td>
		</tr>
		<tr>
			<td colspan="2">



				<select id="5" name="5" size="1" onchange="5" tabindex="5">
					<option value="0">...</option>
					<option value="80">BLANCA OSUNA (FPV)</option>
					<option value="81">SERGIO VARISCO (CAMBIEMOS)</option>
					<option value="82">GASTON GRAND (FPV)</option>
					<option value="83">RUBEN ALMARA (FPV)</option>
					<option value="84">MARCELO HADDAD (PROGRESISTAS)</option>
					<option value="85">DANIEL ELIAS (FPV)</option>
					<option value="86">FERNANDO QUINODOZ (UNA)</option>
					<option value="87">SERGIO PAZ (UNA)</option>
					<option value="88">EDUARDO LOPEZ SEGURA (UNA)</option>
					<option value="89">MARTIN GABIOUD (CAMBIEMOS)</option>
					<option value="90">CIELO KRAMER (NUEVA IZQUIERDA)</option>
					<option value="91">OTRO</option>
					<option value="92">EN BLANCO</option>
				</select>

			</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>
				<div id="div_otra_opcion_5" style="display:none">
					<input type="text" id="otra_opcion_5" name="otra_opcion_5" class="input_text" />
				</div>
			</td>
		</tr>
		<tr id="fila_opciones_5">
			<td colspan="2">&nbsp;</td>
		</tr>
		<tr>
			<td colspan="2" style="color:#FF0000"><div id="estado"></div></td>
		</tr>
		<tr>
			<td colspan="2" style="text-align:left;"><input type="button" onClick="no_vacio(5)" value="GUARDAR RESPUESTAS" /></td>
		</tr>
		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>
	</table>
</form>



<script type="text/javascript">

function Guardar_Android(texto) {
       Android.guardar(texto);
   }


function obtenerDatos(cant_preg) {
  	var cadena = '';
	var id_encuesta = document.getElementById('id_encuesta').value
	var nro_usuario = document.getElementById('usuario').value

	for (i=1; i <= cant_preg ; i ++){
		var nro = document.getElementById(i)
		if(typeof nro !== 'undefined' && nro !== null) {

			var nro = document.getElementById(i).value

		}else{
			var sel_f 	= document.getElementById('F_' + i); // Buscar valores en filas
			var sel_c 	= document.getElementById('C_' + i); // Buscar valores en columnas

			texto = '';

			for(x=0; x < sel_f.children.length; x++){
				var child_f = sel_f.children[x]
				var child_c = sel_c.children[x]

				if(child_f.value > 0){
					var texto = texto + child_f.value + '_' + child_c.value + '.'
				}
			}
			var texto = texto.substring(0, texto.length-1);
			var nro = texto;
		}
		cadena = cadena + nro + ';'
	}
	return id_encuesta + ';' + nro_usuario + ';' + cadena
};

function no_vacio(cant_preg){

	var error = 0;

	for (i=1; i <= cant_preg ; i ++){

		var respuesta = document.getElementById(i)
		if(typeof respuesta !== 'undefined' && respuesta !== null) {
			if(document.getElementById(i).value == 0){
				document.getElementById("estado").innerHTML= "Complete la Respuesta " + i ;
				error = 1;
				break;
			}
		}else{
			var sel_f 	= document.getElementById('F_' + i); // Buscar valores en filas
			var sel_c 	= document.getElementById('C_' + i); // Buscar valores en columnas

			if(sel_f.children.length == 0 & sel_c.children.length == 0){
				document.getElementById("estado").innerHTML="Guarde la Respuesta " + i ;
				error = 1;
				break;
			}
		}
	}
	//
	if(error == 0){

		var datos 		= 	obtenerDatos(cant_preg);

		var nro_usuario = document.getElementById('usuario').value
		var nro_encuesta= document.getElementById('total_total').value


		nombre_archivo 	= nro_usuario + '_' + nro_encuesta + '.txt';

		Guardar_Android(datos);


		// Limpia el formulario
		for (i=1; i <= cant_preg ; i ++){
			var respuesta = document.getElementById(i)
			if(typeof respuesta !== 'undefined' && respuesta !== null) {
				if(isNaN(document.getElementById(i).value)){
					document.getElementById(i).value = '-'
				}else{
					document.getElementById(i).value = 0
				}
			}else{

				var fila = document.getElementById('F_' + i);
				var sel_parent = fila.parentNode;
				var nueva_fila = fila.cloneNode(false)
				sel_parent.replaceChild(nueva_fila,fila)

				var colu = document.getElementById('C_' + i);
				var sel_parent = colu.parentNode;
				var nueva_colu = colu.cloneNode(false)
				sel_parent.replaceChild(nueva_colu,colu)
			}
		}
		document.getElementById('total_total').value = parseInt(document.getElementById('total_total').value) + 1;
		location.href='#tablero'
		document.getElementById("estado").innerHTML= " "
	}
}

function ver_respuestas(){

	for (x=0; x<=localStorage.length-1; x++)  {
		clave = localStorage.key(x);
		var miDato = localStorage.getItem(clave);
		document.getElementById('valores').value = document.getElementById('valores').value + miDato;

	}


}
function agrega_valores(f,c,id)
{
	var resf = document.getElementById(f).value
	var texto = document.getElementById(f);
	var textof = texto.options[texto.selectedIndex].text;

	var sel_f = document.getElementById('F_' + id);
	var opt_f = document.createElement('option');
	opt_f.appendChild( document.createTextNode(textof) );
	opt_f.value = resf; // set value property of opt
	sel_f.appendChild(opt_f);

	for (i = 0; i < sel_f.length; i++) {
      if (sel_f[i].value == resf) {
         sel_f[i].selected = true;
      }
   	}

	var resc = document.getElementById(c).value
	var texto = document.getElementById(c);
	var textoc = texto.options[texto.selectedIndex].text;

	var sel_c = document.getElementById('C_' + id);
	var opt_c = document.createElement('option');
	opt_c.appendChild( document.createTextNode(textoc) );
	opt_c.value = resc; // set value property of opt
	sel_c.appendChild(opt_c);

	for (i = 0; i < sel_c.length; i++) {
      if (sel_c[i].value == resc) {
         sel_c[i].selected = true;
      }
   	}

	document.getElementById(f).value = 0
	document.getElementById(c).value = 0
}

function elimina_valores(f,c){

var fila = document.getElementById(f);
if (fila.length > 0) {
	fila.remove(fila.length-1);
}
var columna = document.getElementById(c);
if (columna.length > 0) {
	columna.remove(columna.length-1);
}
}

function agrega_opcion(opcion)
{
	var res = document.getElementById(id).value
	if(res == 99){
		document.getElementById("div_otra_opcion").show()
		document.getElementById("otra_opcion").focus()
	}else{
		document.getElementById("div_otra_opcion").hide()
	}

}

</script>

</body>
</html>