
<!DOCTYPE html>
<html>
<head>

    <title>Sgeer Movil</title>

    <meta charset=UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="bootstrap.css" rel="stylesheet" type="text/css"/>

    <link href="jquery.mobile-1.4.5.css" rel="stylesheet" type="text/css"/>
    <script src="jquery.js" type="text/javascript"></script>
    <script src="bootstrap.js" type="text/javascript"></script>
    <script src="jquery.mobile-1.4.5.js" type="text/javascript"></script>

</head>


<body>


<div data-role="page" data-theme="a" id="pagina0">

    <div data-role="header">
        <h1>Gestion Encuestas - Versión 1.1</h1>
    </div>

    <div data-role="main" style="background-color: darkseagreen; color:#FFF;text-align: center">
        <div class="ui-content">
            <input type="hidden"  name="id_encuesta" id="id_encuesta" value="91"/>

            <label for="usuario">Usuario</label>
            <input type="text" value="1" name="usuario" id="usuario" placeholder="Nro de Usuario" size="2" style="text-align:center">

            <label for="total_total">Guardadas</label>
            <input type="text" value="0" name="total_total" id="total_total" size="2" style="text-align:center">

        </div>
    </div>

    <div data-role="footer" data-position="fixed">
        <div class="ui-content">

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina">&nbsp;</a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    &nbsp;
                </div>
            </div>

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina1">Iniciar</a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    <a href="#">&nbsp;</a>
                </div>
            </div>

        </div>
    </div>

</div>



<div data-role="page" data-theme="a" id="pagina1">

    <div data-role="header" style="text-align: center">
        <h3>
            &COPY; Sgeer - Versión 1.1
        </h3>
    </div>

    <div data-role="main">
        <div class="ui-content">
            <h4>
                1 - SEXO                </h4>
            <br>
            <select id="1" name="1" size="1" data-native-menu="false">
                <option value="0">...</option>
                <option value="1">MASCULINO</option>
                <option value="2">FEMENINO</option>
            </select>

        </div>

    </div>

    <div data-role="footer" data-position="fixed">
        <div class="ui-content">
            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina0">Atrás   </a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    Pregunta 1 de 5                    </div>
            </div>

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina2">Adelante</a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    <a href="#pagina6">Finalizar</a>
                </div>
            </div>
        </div>
    </div>

</div>


<div data-role="page" data-theme="a" id="pagina2">

    <div data-role="header" style="text-align: center">
        <h3>
            &COPY; Sgeer - Versión 1.1
        </h3>
    </div>

    <div data-role="main">
        <div class="ui-content">
            <h4>
                2 - EDAD                </h4>
            <br>
            <select id="2" name="2" size="1" data-native-menu="false">
                <option value="0">...</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
                <option value="24">24</option>
                <option value="25">25</option>
                <option value="26">26</option>
                <option value="27">27</option>
                <option value="28">28</option>
                <option value="29">29</option>
                <option value="30">30</option>
                <option value="31">31</option>
                <option value="32">32</option>
                <option value="33">33</option>
                <option value="34">34</option>
                <option value="35">35</option>
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
                <option value="40">40</option>
                <option value="41">41</option>
                <option value="42">42</option>
                <option value="43">43</option>
                <option value="44">44</option>
                <option value="45">45</option>
                <option value="46">46</option>
                <option value="47">47</option>
                <option value="48">48</option>
                <option value="49">49</option>
                <option value="50">50</option>
                <option value="51">51</option>
                <option value="52">52</option>
                <option value="53">53</option>
                <option value="54">54</option>
                <option value="55">55</option>
                <option value="56">56</option>
                <option value="57">57</option>
                <option value="58">58</option>
                <option value="59">59</option>
                <option value="60">60</option>
                <option value="61">61</option>
                <option value="62">62</option>
                <option value="63">63</option>
                <option value="64">64</option>
                <option value="65">65</option>
                <option value="66">66</option>
                <option value="67">67</option>
                <option value="68">68</option>
                <option value="69">69</option>
                <option value="70">70</option>
                <option value="71">71</option>
                <option value="72">72</option>
                <option value="73">73</option>
                <option value="74">74</option>
                <option value="75">75</option>
                <option value="76">76</option>
                <option value="77">77</option>
                <option value="78">78</option>
                <option value="79">79</option>
                <option value="80">80</option>
            </select>

        </div>

    </div>

    <div data-role="footer" data-position="fixed">
        <div class="ui-content">
            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina1">Atrás   </a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    Pregunta 2 de 5                    </div>
            </div>

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina3">Adelante</a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    <a href="#pagina6">Finalizar</a>
                </div>
            </div>
        </div>
    </div>

</div>


<div data-role="page" data-theme="a" id="pagina3">

    <div data-role="header" style="text-align: center">
        <h3>
            &COPY; Sgeer - Versión 1.1
        </h3>
    </div>

    <div data-role="main">
        <div class="ui-content">
            <h4>
                3 - NIVEL FORMACION                </h4>
            <br>
            <select id="3" name="3" size="1" data-native-menu="false">
                <option value="0">...</option>
                <option value="1">SIN ESCOLARIDAD</option>
                <option value="2">PRIMARIO INCOMPLETO</option>
                <option value="3">PRIMARIO COMPLETO</option>
                <option value="4">SECUNDARIO INCOMPLETO</option>
                <option value="5">SECUNDARIO COMPLETO</option>
                <option value="6">TERCIARIO INCOMPLETO</option>
                <option value="7">TERCIARIO COMPLETO</option>
                <option value="8">UNIVERSITARIO INCOMP</option>
                <option value="9">UNIVERSITARIO COMPLETO O MAS</option>
            </select>

        </div>

    </div>

    <div data-role="footer" data-position="fixed">
        <div class="ui-content">
            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina2">Atrás   </a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    Pregunta 3 de 5                    </div>
            </div>

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina4">Adelante</a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    <a href="#pagina6">Finalizar</a>
                </div>
            </div>
        </div>
    </div>

</div>


<div data-role="page" data-theme="a" id="pagina4">

    <div data-role="header" style="text-align: center">
        <h3>
            &COPY; Sgeer - Versión 1.1
        </h3>
    </div>

    <div data-role="main">
        <div class="ui-content">
            <h4>
                4 - OCUPACION                </h4>
            <br>
            <select id="4" name="4" size="1" data-native-menu="false">
                <option value="0">...</option>
                <option value="1">JUBILADO / PENSIONADO</option>
                <option value="2">AMA DE CASA</option>
                <option value="3">ESTUDIANTE</option>
                <option value="4">DESEMPLEADO</option>
                <option value="5">TRABAJA SECTOR PUBLICO</option>
                <option value="6">TRABAJA SECTOR PRIVADO</option>
                <option value="7">CUENTAPROPISTA</option>
                <option value="8">NO TRABAJA/NO ESTUDIA</option>
            </select>

        </div>

    </div>

    <div data-role="footer" data-position="fixed">
        <div class="ui-content">
            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina3">Atrás   </a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    Pregunta 4 de 5                    </div>
            </div>

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina5">Adelante</a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    <a href="#pagina6">Finalizar</a>
                </div>
            </div>
        </div>
    </div>

</div>


<div data-role="page" data-theme="a" id="pagina5">

    <div data-role="header" style="text-align: center">
        <h3>
            &COPY; Sgeer - Versión 1.1
        </h3>
    </div>

    <div data-role="main">
        <div class="ui-content">
            <h4>
                5 - ESTA DE ACUERDO                </h4>
            <br>
            <select id="5" name="5" size="1" onchange="5" data-native-menu="false">
                <option value="0">...</option>
                <option value="12">MUY DE ACUERDO</option>
            </select>


        </div>

    </div>

    <div data-role="footer" data-position="fixed">
        <div class="ui-content">
            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina4">Atrás   </a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    Pregunta 5 de 5                    </div>
            </div>

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina6">Adelante</a>
                </div>
            </div>

            <div style="float: left;width: 17%">
                <div style="text-align:center">
                    <a href="#pagina6">Finalizar</a>
                </div>
            </div>
        </div>
    </div>

</div>


<div data-role="page" data-theme="a" id="pagina6">

    <div data-role="header">
        <h3>
            &COPY; Sgeer - Versión 1.1
        </h3>
    </div>

    <div data-role="main">

        <div class="ui-content">

            <h4>
                <button type="button" id="estado" style="display:none; background-color: red; color: white"></button>
            </h4>
            <br>

        </div>
    </div>

    <div data-role="footer" data-position="fixed">
        <div class="ui-content">

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#pagina5">Atrás   </a>
                </div>
            </div>

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#" data-icon="check" onClick="no_vacio(5)">Guardar resultado</a>
                </div>
            </div>

            <div style="float: left;width: 33%">
                <div style="text-align:center">
                    <a href="#">&nbsp;</a>
                </div>
            </div>

        </div>
    </div>

</div>



<script type="text/javascript">

    function Guardar_Android(texto) {
        var total = parseInt(document.getElementById('total_total').value) + 1;
        Android.guardar(texto);
        window.location.reload();
        document.getElementById('total_total').value = total;
    }


    function obtenerDatos(cant_preg) {
        var cadena = '';
        var id_encuesta = document.getElementById('id_encuesta').value;
        var nro_usuario = document.getElementById('usuario').value;

        for (i=1; i <= cant_preg ; i ++){
            var nro = document.getElementById(i);
            if(typeof nro !== 'undefined' && nro !== null) {

                var nro = document.getElementById(i).value ;

            }else{
                var sel_f 	= document.getElementById('F_' + i); // Buscar valores en filas
                var sel_c 	= document.getElementById('C_' + i); // Buscar valores en columnas

                texto = '';

                for(x=0; x < sel_f.children.length; x++){
                    var child_f = sel_f.children[x];
                    var child_c = sel_c.children[x];

                    if(child_f.value > 0){
                        var texto = texto + child_f.value + '_' + child_c.value + '.' ;
                    }
                }
                var texto = texto.substring(0, texto.length-1);
                var nro = texto;
            }
            cadena = cadena + nro + ';' ;
        }
        return id_encuesta + ';' + nro_usuario + ';' + cadena ;
    }

    function no_vacio(cant_preg){

        var error = 0;

        for (i=1; i <= cant_preg ; i ++){

            var respuesta = document.getElementById(i);
            if(typeof respuesta !== 'undefined' && respuesta !== null) {
                if(document.getElementById(i).value == 0){
                    $("#estado").show();
                    document.getElementById("estado").innerHTML= " Respuesta " + i + " sin responder"  ;
                    error = 1;
                    $("#estado").toggle(8000);

                    break;
                }
            }else{
                var sel_f 	= document.getElementById('F_' + i); // Buscar valores en filas
                var sel_c 	= document.getElementById('C_' + i); // Buscar valores en columnas

                if(sel_f.children.length == 0 & sel_c.children.length == 0){
                    $("#estado").show();
                    document.getElementById("estado").innerHTML= " Respuesta " + i + " sin responder"  ;
                    $("#estado").toggle(8000);
                    error = 1;
                    break;
                }
            }
        }
        //
        if(error === 0){

            var datos = obtenerDatos(cant_preg);

            Guardar_Android(datos);
        }
    }


    function agrega_valores(f,c,id){
        var resf = document.getElementById(f).value;
        var texto = document.getElementById(f);
        var textof = texto.options[texto.selectedIndex].text;

        var sel_f = document.getElementById('F_' + id);
        var opt_f = document.createElement('option');
        opt_f.appendChild( document.createTextNode(textof) );
        opt_f.value = resf; // set value property of opt
        sel_f.appendChild(opt_f);

        for (i = 0; i < sel_f.length; i++) {
          if (sel_f[i].value == resf) {
             sel_f[i].selected = true;
          }
        }

        var resc = document.getElementById(c).value;
        var texto = document.getElementById(c);
        var textoc = texto.options[texto.selectedIndex].text;

        var sel_c = document.getElementById('C_' + id);
        var opt_c = document.createElement('option');
        opt_c.appendChild( document.createTextNode(textoc) );
        opt_c.value = resc; // set value property of opt
        sel_c.appendChild(opt_c);

        for (i = 0; i < sel_c.length; i++) {
          if (sel_c[i].value == resc) {
             sel_c[i].selected = true;
          }
        }

        document.getElementById(f).value = 0;
        document.getElementById(c).value = 0;
    }

    function elimina_valores(f,c){

        var fila = document.getElementById(f);
        if (fila.length > 0) {
            fila.remove(fila.length-1);
        }

        var columna = document.getElementById(c);
        if (columna.length > 0) {
            columna.remove(columna.length-1);
        }
    }

    function agrega_opcion(opcion){
        var res = document.getElementById(id).value ;
        if(res == 99){
            document.getElementById("div_otra_opcion").show();
            document.getElementById("otra_opcion").focus()	;
        }else{
            document.getElementById("div_otra_opcion").hide();
        }

    }

    </script>

</body>

</html>

